---
const services = [
  {
    title: 'Documentation',
    description:
      'Technical documentation that developers actually read. From API references to integration guides, we create content that reduces support tickets and speeds up adoption.',
  },
  {
    title: 'Events',
    description:
      'Developer conferences, workshops, and community building. We organize technical events that bring developers together and drive ecosystem growth.',
  },
  {
    title: 'Developer Outreach',
    description:
      'Strategic developer relations and ecosystem growth. We help projects build thriving developer communities through advocacy, education, and direct engagement.',
  },
];
---

<section id="services" class="py-24 overflow-hidden">
  <div class="mx-auto max-w-3xl px-6">
    <h2
      data-animate
      class="text-3xl md:text-4xl font-bold font-coconat text-center relative z-20"
    >
      Our Services
    </h2>
    <p
      data-animate
      data-delay="100"
      class="mt-4 text-center text-text-secondary relative z-20"
    >
      Helping blockchain projects succeed through developer experience excellence. Continuously.
    </p>

    <div class="mt-20 sm:mt-24 md:mt-32 lg:mt-40 flex flex-col gap-6 relative services-container">
      {
        services.map((service, i) => (
          <>
            <div
              data-animate
              data-delay={150 + i * 100}
              class="p-6 rounded-xl bg-brand-alpha-5 border-l-4 border-l-brand-500 border-t border-t-brand-500 border-r border-r-brand-500 border-b border-b-brand-500 hover:border-l-brand-400 transition-all group relative z-10"
            >
              <h3 class="text-2xl font-semibold font-coconat text-text-primary group-hover:text-accent transition-colors">
                {service.title}
              </h3>
              <p class="mt-3 text-text-primary">{service.description}</p>
            </div>

            {i < services.length - 1 && (
              <div
                data-animate
                data-delay={200 + i * 100}
                class="flex justify-center relative z-10"
              >
                <svg
                  class="w-10 h-20 text-accent arrow-flow"
                  viewBox="0 0 40 80"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                >
                  <defs>
                    <linearGradient id={`gradient-${i}`} x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop
                        offset="0%"
                        style="stop-color:var(--color-brand-400);stop-opacity:0.7"
                      />
                      <stop
                        offset="100%"
                        style="stop-color:var(--color-brand-500);stop-opacity:1"
                      />
                    </linearGradient>
                  </defs>
                  <path
                    d="M20 5 L20 60 M11 51 L20 60 L29 51"
                    stroke={`url(#gradient-${i})`}
                    class="arrow-path"
                  />
                </svg>
              </div>
            )}
          </>
        ))
      }

      <!-- Loop-back arrow -->
      <div class="absolute w-full h-full pointer-events-none z-0 loop-arrow-wrapper">
        <svg
          data-animate
          data-delay="550"
          class="loop-arrow w-full h-full"
          viewBox="0 0 600 800"
          fill="none"
          stroke="currentColor"
          stroke-width="4"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <defs>
            <linearGradient id="loop-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:var(--color-brand-400);stop-opacity:0.7"></stop>
              <stop offset="50%" style="stop-color:var(--color-brand-500);stop-opacity:0.8"></stop>
              <stop offset="100%" style="stop-color:var(--color-brand-400);stop-opacity:0.7"></stop>
            </linearGradient>
          </defs>
          <!-- Loop path: down → right → up → left → down -->
          <path
            d="m 300 760 l 0 20 a 15 15 0 0 0 15 15 l 250 0 a 15 15 0 0 0 15 -15 l 0 -740 a 15 15 0 0 0 -15 -15 l -250 0 a 15 15 0 0 0 -15 15 l 0 30"
            stroke="url(#loop-gradient)"
            class="loop-path text-accent"></path>
          <!-- Arrow head -->
          <path
            d="M 291 64 L 300 73 L 309 64"
            stroke="url(#loop-gradient)"
            class="loop-arrow-head text-accent"></path>
        </svg>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes arrow-flow {
    0%,
    100% {
      opacity: 0.5;
      filter: drop-shadow(0 0 4px var(--color-brand-500));
      transform: scale(1);
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 16px var(--color-brand-500))
        drop-shadow(0 0 24px var(--color-brand-400));
      transform: scale(1.05);
    }
  }

  @keyframes stroke-flow {
    0% {
      stroke-dashoffset: 150;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes loop-stroke-flow {
    0% {
      stroke-dashoffset: 1400;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes arrow-appear {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes loop-flow {
    0%,
    100% {
      opacity: 0.6;
      filter: drop-shadow(0 0 6px var(--color-brand-400));
      transform: scale(1);
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 20px var(--color-brand-400))
        drop-shadow(0 0 30px var(--color-brand-500));
      transform: scale(1.03);
    }
  }

  .arrow-flow {
    animation: arrow-flow 1.5s ease-in-out infinite;
    transform-origin: center;
    will-change: transform, opacity, filter;
  }

  .arrow-flow:nth-child(1) {
    animation-delay: 0s;
  }

  .arrow-path {
    stroke-dasharray: 150;
    stroke-dashoffset: 150;
    animation: stroke-flow 1.5s ease-out forwards;
  }

  .loop-arrow {
    animation: loop-flow 2.5s ease-in-out infinite;
    transform-origin: center;
    will-change: transform, opacity, filter;
  }

  .loop-path {
    stroke-dasharray: 1400;
    stroke-dashoffset: 1400;
    animation: loop-stroke-flow 2s ease-out forwards;
    animation-delay: 1.5s;
  }

  .loop-arrow-head {
    opacity: 0;
    animation: arrow-appear 0.3s ease-out forwards;
    animation-delay: 3.5s;
  }

  .services-container {
    padding: 100px 30px 0 0px;
    margin: 0;
  }

  @media (min-width: 640px) {
    .services-container {
      padding: 110px 30px 0px 10px;
    }
  }

  @media (min-width: 768px) {
    .services-container {
      padding: 110px 20px 0px 20px;
    }
  }

  @media (min-width: 1024px) {
    .services-container {
      padding: 100px 100px 0 100px;
    }
  }

  .loop-arrow-wrapper {
    top: 35px;
    left: -20px;
    transform: scaleX(1.15) scaleY(1.65);
    transform-origin: center;
    overflow: visible;
  }

  @media (min-width: 640px) {
    .loop-arrow-wrapper {
      top: 40px;
      transform: scaleX(1.06) scaleY(1.15);
    }
  }

  @media (min-width: 768px) {
    .loop-arrow-wrapper {
      top: 40px;
      transform: scaleX(1.22) scaleY(1.07);
    }
  }

  @media (min-width: 1024px) {
    .loop-arrow-wrapper {
      top: 30px;
      transform: scale(1.05);
    }
  }
</style>
