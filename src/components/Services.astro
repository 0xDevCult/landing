---
const services = [
  {
    title: 'Documentation',
    description:
      'Technical documentation that developers actually read. From API references to integration guides, we create content that reduces support tickets and speeds up adoption.',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" /></svg>`,
  },
  {
    title: 'Events',
    description:
      'Developer conferences, workshops, and community building. We organize technical events that bring developers together and drive ecosystem growth.',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" /></svg>`,
  },
  {
    title: 'Developer Outreach',
    description:
      'Strategic developer relations and ecosystem growth. We help projects build thriving developer communities through advocacy, education, and direct engagement.',
    icon: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46" /></svg>`,
  },
];
---

<section id="services" class="py-24 overflow-hidden">
  <div class="mx-auto max-w-3xl px-6">
    <h2 data-animate class="text-3xl md:text-4xl font-bold font-coconat text-center relative z-20">
      Our Services
    </h2>
    <p data-animate data-delay="100" class="mt-4 text-center text-text-secondary relative z-20">
      Helping blockchain projects succeed through developer experience excellence. Continuously.
    </p>

    <div class="mt-20 sm:mt-24 md:mt-32 lg:mt-40 flex flex-col gap-6 relative services-container">
      {
        services.map((service, i) => (
          <>
            <div
              data-animate
              data-delay={150 + i * 100}
              class="service-card p-6 rounded-xl border-l-4 border-l-brand-500 border-t border-t-brand-500 border-r border-r-brand-500 border-b border-b-brand-500 transition-all group relative z-10"
            >
              <div class="flex items-start gap-4">
                <div class="service-icon text-accent flex-shrink-0" set:html={service.icon} />
                <div>
                  <h3 class="text-2xl font-semibold font-coconat text-text-primary group-hover:text-accent transition-colors">
                    {service.title}
                  </h3>
                  <p class="mt-3 text-text-secondary">{service.description}</p>
                </div>
              </div>
            </div>

            {i < services.length - 1 && (
              <div
                data-animate
                data-delay={200 + i * 100}
                class="flex justify-center relative z-10"
              >
                <svg
                  class="w-10 h-20 text-accent arrow-flow"
                  viewBox="0 0 40 80"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                >
                  <defs>
                    <linearGradient id={`gradient-${i}`} x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop
                        offset="0%"
                        style="stop-color:var(--color-brand-400);stop-opacity:0.7"
                      />
                      <stop
                        offset="100%"
                        style="stop-color:var(--color-brand-500);stop-opacity:1"
                      />
                    </linearGradient>
                  </defs>
                  <path
                    d="M20 5 L20 60 M11 51 L20 60 L29 51"
                    stroke={`url(#gradient-${i})`}
                    class="arrow-path"
                  />
                </svg>
              </div>
            )}
          </>
        ))
      }

      <!-- Loop-back arrow -->
      <div class="absolute w-full h-full pointer-events-none z-0 loop-arrow-wrapper">
        <svg
          data-animate
          data-delay="550"
          class="loop-arrow w-full h-full"
          viewBox="0 0 600 800"
          fill="none"
          stroke="currentColor"
          stroke-width="4"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <defs>
            <linearGradient id="loop-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:var(--color-brand-400);stop-opacity:0.7"></stop>
              <stop offset="50%" style="stop-color:var(--color-brand-500);stop-opacity:0.8"></stop>
              <stop offset="100%" style="stop-color:var(--color-brand-400);stop-opacity:0.7"></stop>
            </linearGradient>
          </defs>
          <!-- Loop path: down → right → up → left → down -->
          <path
            d="m 300 760 l 0 20 a 15 15 0 0 0 15 15 l 250 0 a 15 15 0 0 0 15 -15 l 0 -740 a 15 15 0 0 0 -15 -15 l -250 0 a 15 15 0 0 0 -15 15 l 0 30"
            stroke="url(#loop-gradient)"
            class="loop-path text-accent"></path>
          <!-- Arrow head -->
          <path
            d="M 291 64 L 300 73 L 309 64"
            stroke="url(#loop-gradient)"
            class="loop-arrow-head text-accent"></path>
        </svg>
      </div>
    </div>
  </div>
</section>

<style>
  .service-card {
    background: linear-gradient(
      135deg,
      rgba(255, 106, 0, 0.08) 0%,
      rgba(255, 106, 0, 0.02) 50%,
      rgba(255, 106, 0, 0.05) 100%
    );
  }

  .service-card:hover {
    background: linear-gradient(
      135deg,
      rgba(255, 106, 0, 0.12) 0%,
      rgba(255, 106, 0, 0.04) 50%,
      rgba(255, 106, 0, 0.08) 100%
    );
    border-left-color: var(--color-brand-400);
    transform: translateX(4px);
    box-shadow: 0 4px 20px rgba(255, 106, 0, 0.15);
  }

  .service-icon {
    padding: 12px;
    background: rgba(255, 106, 0, 0.1);
    border-radius: 12px;
    transition: all 0.3s ease;
  }

  .service-card:hover .service-icon {
    background: rgba(255, 106, 0, 0.2);
    transform: scale(1.05);
  }

  @keyframes arrow-flow {
    0%,
    100% {
      opacity: 0.5;
      filter: drop-shadow(0 0 4px var(--color-brand-500));
      transform: scale(1);
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 16px var(--color-brand-500))
        drop-shadow(0 0 24px var(--color-brand-400));
      transform: scale(1.05);
    }
  }

  @keyframes stroke-flow {
    0% {
      stroke-dashoffset: 150;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes loop-stroke-flow {
    0% {
      stroke-dashoffset: 1400;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes arrow-appear {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes loop-flow {
    0%,
    100% {
      opacity: 0.6;
      filter: drop-shadow(0 0 6px var(--color-brand-400));
      transform: scale(1);
    }
    50% {
      opacity: 1;
      filter: drop-shadow(0 0 20px var(--color-brand-400))
        drop-shadow(0 0 30px var(--color-brand-500));
      transform: scale(1.03);
    }
  }

  .arrow-flow {
    animation: arrow-flow 1.5s ease-in-out infinite;
    transform-origin: center;
    will-change: transform, opacity, filter;
  }

  .arrow-flow:nth-child(1) {
    animation-delay: 0s;
  }

  .arrow-path {
    stroke-dasharray: 150;
    stroke-dashoffset: 150;
    animation: stroke-flow 1.5s ease-out forwards;
  }

  .loop-arrow {
    animation: loop-flow 2.5s ease-in-out infinite;
    transform-origin: center;
    will-change: transform, opacity, filter;
  }

  .loop-path {
    stroke-dasharray: 1400;
    stroke-dashoffset: 1400;
    animation: loop-stroke-flow 2s ease-out forwards;
    animation-delay: 0.5s;
  }

  .loop-arrow-head {
    opacity: 0;
    animation: arrow-appear 0.3s ease-out forwards;
    animation-delay: 2.5s;
  }

  .services-container {
    padding: 100px 30px 0 0px;
    margin: 0;
  }

  @media (min-width: 640px) {
    .services-container {
      padding: 110px 30px 0px 10px;
    }
  }

  @media (min-width: 768px) {
    .services-container {
      padding: 110px 20px 0px 20px;
    }
  }

  @media (min-width: 1024px) {
    .services-container {
      padding: 100px 100px 0 100px;
    }
  }

  .loop-arrow-wrapper {
    display: none;
    left: 0;
    transform-origin: center;
    overflow: visible;
  }

  @media (min-width: 640px) {
    .loop-arrow-wrapper {
      display: block;
      top: 40px;
      left: -20px;
      transform: scaleX(1.06) scaleY(1.15);
    }
  }

  @media (min-width: 768px) {
    .loop-arrow-wrapper {
      top: 40px;
      left: -10px;
      transform: scaleX(1.22) scaleY(1.07);
    }
  }

  @media (min-width: 1024px) {
    .loop-arrow-wrapper {
      top: 30px;
      left: 0;
      transform: scale(1.05);
    }
  }
</style>
